<!doctype html>
<html>
<style>
	#canvas {
		border: 1px solid black;
	}
</style>

<head>
	<meta charset="utf-8">
	<title>Tic Tac Toe</title><br>
	<script>
		// global variables (s1 ... s9 and, playerTurn , boardSize (600)
		var xImg = new Image();
		xImg.src = "X.png";

		var oImg = new Image();
		oImg.src = "O.png";

		oImg.onload = loaded;


		const gameBoard = [
			[null, null, null],
			[null, null, null],
			[null, null, null]
		]



		var square1
		var square2
		var square3
		var square4
		var square5
		var square6
		var square7
		var square8
		var square9
		var currentTurn = "x"

		function loaded() { // start of loaded
			canvas = document.getElementById("canvas")
			ctx = canvas.getContext("2d")

			// Disable antialiasing for the canvas
			ctx.imageSmoothingEnabled = false;

			/*
				this is the main function to control the game that runs when the page loads.
				it needs to:
					1) set up the board
					2) reset the global variables
					3) display a message on the board so we know who's turn it is
					4) create an event listener for when the board is clicked
			*/





			var lineWidth = 3;

			ctx.beginPath()
			ctx.rect(200 - lineWidth / 2, 0, lineWidth, canvas.height); // parameters are x,y,width,height
			ctx.closePath()
			ctx.fillStyle = "black";
			ctx.fill();

			ctx.beginPath()
			ctx.rect(400 - lineWidth / 2, 0, lineWidth, canvas.height); // parameters are x,y,width,height
			ctx.closePath()
			ctx.fillStyle = "black";
			ctx.fill();

			ctx.beginPath()
			ctx.rect(0, 200 - lineWidth / 2, canvas.height, lineWidth); // parameters are x,y,width,height
			ctx.closePath()
			ctx.fillStyle = "black";
			ctx.fill();

			ctx.beginPath()
			ctx.rect(0, 400 - lineWidth / 2, canvas.height, lineWidth); // parameters are x,y,width,height
			ctx.closePath()
			ctx.fillStyle = "black";
			ctx.fill();

			ctx.beginPath()
			ctx.rect(0, 600, canvas.width, 50); // parameters are x,y,width,height
			ctx.closePath()
			ctx.fillStyle = "black";
			ctx.fill();




			// end of loaded responsibility

			canvas.addEventListener('click', function (event) { // start of click event listener
				/*
					this function checks what square was clicked on and calls makeMove passing
					the appropriate parameter for the square
					INPUTS - 
						event - the click event object
					OUTPUTS - 
						none
					
				*/
				var clickX = event.pageX - canvas.offsetLeft
				var clickY = event.pageY - canvas.offsetTop;
				currentTurn = document.getElementById('playerTurn').value
				var squareNum
				// what square was clicked
				document.getElementById("clickPosHtml").innerHTML = "clickX:" + clickX + "<br/>clickY:" + clickY

				if (clickX <= 200 && clickY < 200) { // first x
					squareNum = 1
					if (square1 == null) {
						if (currentTurn == "x") {
							square1 = 1
						}
						if (currentTurn == "o") {
							square1 = 10
						}
						makeMove(0, 0)
					}

				}

				if (clickX > 200 && clickX < 400 && clickY < 200) { // second x
					squareNum = 2
					if (square2 == null) {
						if (currentTurn == "x") {
							square2 = 1
						}
						if (currentTurn == "o") {
							square2 = 10
						}
						makeMove(200, 0)
					}
				}

				if (clickX > 400 && clickY < 200) { // third x
					squareNum = 3
					if (square3 == null) {
						if (currentTurn == "x") {
							square3 = 1
						}
						if (currentTurn == "o") {
							square3 = 10
						}
						makeMove(400, 0)
					}
				}

				if (clickX <= 200 && clickY > 200 && clickY < 400) { // fourth x
					squareNum = 4
					if (square4 == null) {
						if (currentTurn == "x") {
							square4 = 1
						}
						if (currentTurn == "o") {
							square4 = 10
						}
						makeMove(0, 200)
					}
				}

				if (clickX > 200 && clickX < 400 && clickY > 200 && clickY < 400) { // fifth x
					squareNum = 5
					if (square5 == null) {
						if (currentTurn == "x") {
							square5 = 1
						}
						if (currentTurn == "o") {
							square5 = 10
						}
						makeMove(200, 200)
					}
				}

				if (clickX > 400 && clickY > 200 && clickY < 400) { // sixth x
					squareNum = 6
					if (square6 == null) {
						if (currentTurn == "x") {
							square6 = 1
						}
						if (currentTurn == "o") {
							square6 = 10
						}
						makeMove(400, 200)
					}
				}

				if (clickX < 200 && clickY > 400 && clickY < 600) { // seventh x
					squareNum = 7
					if (square7 == null) {
						if (currentTurn == "x") {
							square7 = 1
						}
						if (currentTurn == "o") {
							square7 = 10
						}
						makeMove(0, 400)
					}
				}

				if (clickX > 200 && clickX < 400 && clickY > 400 && clickY < 600) { // eighth x
					squareNum = 8
					if (square8 == null) {
						if (currentTurn == "x") {
							square8 = 1
						}
						if (currentTurn == "o") {
							square8 = 10
						}
						makeMove(200, 400)
					}
				}

				if (clickX > 400 && clickY > 400 && clickY < 600) { // ninth x
					squareNum = 9
					if (square9 == null) {
						if (currentTurn == "x") {
							square9 = 1
						}
						if (currentTurn == "o") {
							square9 = 10
						}
						makeMove(400, 400)
					}
				}
				if (clickY > 600) { // black bar
					squareNum = 10
				}
				document.getElementById("squareNum").innerHTML = "squareNum:" + squareNum
			}, false); // end of eventListener	
		}// end of loaded

		function makeMove(x, y) {
			if (currentTurn == "x") { ctx.drawImage(xImg, x, y, 200, 200) }
			if (currentTurn == "o") { ctx.drawImage(oImg, x, y, 200, 200) }
		}





	</script>

</head>

<body>
	<canvas id="canvas" width="600" height="650"></canvas>
	<br>
	<p id="clickPosHtml"></p>
	<p id="squareNum"></p>
	<select name="playerTurn" id="playerTurn" style="width: auto;">
		<option value="x">X</option>
		<option value="o">O</option>
	</select>
</body>

</html>